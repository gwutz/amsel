

#include <glib.h>

G_BEGIN_DECLS

#ifndef AMSEL_ENABLE_TRACING
#  define AMSEL_ENABLE_TRACING @AMSEL_ENABLE_TRACING@
#endif
#if AMSEL_ENABLE_TRACING != 1
#  undef AMSEL_ENABLE_TRACING
#endif

#ifndef AM_LOG_LEVEL_TRACE
#define AM_LOG_LEVEL_TRACE ((GLogLevelFlags)(1 << G_LOG_LEVEL_USER_SHIFT))
#endif

#if AMSEL_ENABLE_TRACING
#define AM_TRACE_MSG(fmt, ...) \
	g_log(G_LOG_DOMAIN, AM_LOG_LEVEL_TRACE, "MSG: %s():%d: " fmt, G_STRFUNC, __LINE__, ##__VA_ARGS__)
#define AM_ENTRY \
	g_log(G_LOG_DOMAIN, AM_LOG_LEVEL_TRACE, "ENTRY: %s():%d", G_STRFUNC, __LINE__)
#else
#define AM_TRACE_MSG(fmt, ...) G_STMT_START { } G_STMT_END
#define AM_ENTRY               G_STMT_START { } G_STMT_END
#endif